#!/usr/bin/env bash

REPOSITORY="${HOME}/git/work/devenv/"
PROXY_CONTAINER="proxy"

# Run
/usr/bin/docker-compose -f ${REPOSITORY}compose/$1.yml $2 $3

RUNNING=$(/usr/bin/docker inspect --format="{{.State.Running}}" $PROXY_CONTAINER)

# Run or restart proxy
if [[ $RUNNING = "false" ]]; then
  /usr/bin/docker-compose -f ${REPOSITORY}docker-compose.yml up -d
else
  /usr/bin/docker-compose -f ${REPOSITORY}docker-compose.yml restart
fi
